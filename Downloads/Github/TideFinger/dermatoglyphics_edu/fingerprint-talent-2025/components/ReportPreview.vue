<template>
  <div class="report-preview">
    <q-card class="report-card">
      <q-card-section class="report-header">
        <div class="report-title">
          <q-icon name="psychology" size="32px" color="purple" />
          <h3>ä¸ªæ€§åŒ–å¤©èµ‹åˆ†ææŠ¥å‘Š</h3>
        </div>
        <p class="report-subtitle">åŸºäºAIçš®çº¹å­¦åˆ†æ Â· ä¸“å±å®šåˆ¶</p>
      </q-card-section>

      <q-card-section class="report-content">
        <!-- ä¸»è¦ç±»å‹å±•ç¤º -->
        <div class="primary-type">
          <h4>ä¸»å¯¼äººæ ¼ç±»å‹</h4>
          <div class="type-display">
            <div class="type-icon">ğŸ¦…</div>
            <div class="type-info">
              <div class="type-name">é¹°å‹Â·å®Œç¾ä¸»ä¹‰è€…</div>
              <div class="type-desc">ç›®æ ‡å¯¼å‘ï¼Œè¿½æ±‚å®Œç¾ï¼Œç‹¬ç«‹æ€è€ƒ</div>
            </div>
          </div>
        </div>

        <!-- äº”ç»´é›·è¾¾å›¾ -->
        <div class="radar-section">
          <h4>äº”ç»´äººæ ¼åˆ†æ</h4>
          <PersonalityRadar3D
            :ocean-scores="scores"
            class="mini-radar"
          />
        </div>

        <!-- å…³é”®ç‰¹è´¨ -->
        <div class="key-traits">
          <h4>æ ¸å¿ƒç‰¹è´¨è§£è¯»</h4>
          <div class="traits-list">
            <q-chip
              v-for="trait in keyTraits"
              :key="trait.name"
              :color="trait.color"
              text-color="white"
              :icon="trait.icon"
            >
              {{ trait.name }}
            </q-chip>
          </div>
        </div>

        <!-- æ•™è‚²å»ºè®®é¢„è§ˆ -->
        <div class="education-tips">
          <h4>æ•™è‚²æŒ‡å¯¼è¦ç‚¹</h4>
          <ul class="tips-list">
            <li v-for="tip in educationTips" :key="tip">
              <q-icon name="lightbulb" color="orange" />
              {{ tip }}
            </li>
          </ul>
        </div>
      </q-card-section>

      <q-card-actions class="report-actions">
        <q-btn
          color="purple"
          label="è·å–å®Œæ•´æŠ¥å‘Š"
          icon="download"
          @click="getFullReport"
        />
        <q-btn
          flat
          color="grey"
          label="äº†è§£æ›´å¤š"
          @click="learnMore"
        />
      </q-card-actions>
    </q-card>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import PersonalityRadar3D from './PersonalityRadar3D.vue'

interface Props {
  scores: {
    openness: number
    conscientiousness: number
    extraversion: number
    agreeableness: number
    neuroticism: number
  }
}

const props = defineProps<Props>()

const keyTraits = computed(() => [
  { name: 'å®Œç¾ä¸»ä¹‰', color: 'purple', icon: 'star' },
  { name: 'ç›®æ ‡å¯¼å‘', color: 'blue', icon: 'flag' },
  { name: 'ç‹¬ç«‹æ€è€ƒ', color: 'green', icon: 'psychology' },
  { name: 'è´£ä»»æ„Ÿå¼º', color: 'orange', icon: 'verified' }
])

const educationTips = computed(() => [
  'ç»™äºˆæ˜ç¡®çš„ç›®æ ‡å’ŒæœŸæœ›',
  'å°Šé‡å­©å­çš„ç‹¬ç«‹æ€è€ƒç©ºé—´',
  'æä¾›æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡',
  'é¿å…è¿‡åº¦å¹²é¢„å’Œå‚¬ä¿ƒ'
])

function getFullReport() {
  // è·³è½¬åˆ°ä»˜è´¹é¡µé¢
}

function learnMore() {
  // æ˜¾ç¤ºæ›´å¤šä¿¡æ¯
}
</script>

<style scoped>
.report-preview {
  max-width: 600px;
  margin: 0 auto;
}

.report-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(10px);
}

.report-header {
  text-align: center;
  background: linear-gradient(135deg, #8B5CF6, #A855F7);
  color: white;
  border-radius: 20px 20px 0 0;
}

.report-title {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 8px;
}

.report-title h3 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
}

.report-subtitle {
  margin: 0;
  opacity: 0.9;
  font-size: 0.9rem;
}

.report-content > div {
  margin-bottom: 2rem;
}

.report-content h4 {
  font-size: 1.2rem;
  color: #5B21B6;
  margin-bottom: 1rem;
  font-weight: 600;
}

.primary-type .type-display {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 20px;
  background: linear-gradient(135deg, #F3E8FF, #E9D5FF);
  border-radius: 15px;
  border: 2px solid #A855F7;
}

.type-icon {
  font-size: 3rem;
}

.type-name {
  font-size: 1.3rem;
  font-weight: 600;
  color: #5B21B6;
  margin-bottom: 4px;
}

.type-desc {
  color: #6B7280;
  font-size: 0.95rem;
}

.mini-radar {
  height: 250px;
}

.traits-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tips-list {
  list-style: none;
  padding: 0;
}

.tips-list li {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid #E5E7EB;
}

.tips-list li:last-child {
  border-bottom: none;
}

.report-actions {
  justify-content: center;
  gap: 16px;
  padding: 24px;
}
</style>
